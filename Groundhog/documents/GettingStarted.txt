# @markup html
# @title Getting Started
# @author German Molina


<h1>Understanding Groundhog</h1>
<p align="justify">The following sections reference some <a href="http://www.radiance-online.org/">Radiance</a> 
programs and conceptual elements. It is assumed that you have some (not really advanced) knowledge about those topics.</p>

<p align="justify">Groundhog intends to use as much as possible the main SketchUp features. 
This allows using other SketchUp geometry-generating-plugins and still be able to export to 
Radiance. You can even download models from the 3D Warehouse, however, that is a really
 immature area, and you will have to be very careful.</p>

<p align="justify">Internally, Groundhog only analyzes SketchUp surfaces (<a href="http://www.sketchup.com/intl/en/developer/docs/ourdoc/face.php">faces</a>), 
and only exports Radiance polygons (which will not only be triangles, but more complex 
polygons as well). Exporting from SketchUp to Radiance can be done in two ways, which will 
allow performing different kinds of analysis (i.e. renders, Daylight Coefficients simulations, 
Three and Five-phase method simulations) easily. This two exporting options will handle differently 
the different surfaces in the model.</p>

<p align="justify">The following section explains what are and how Groundhog identifies different kinds of 
surfaces in the scene, and how the two different exporting options deal with such components.</p>

<h2>Different kinds of surfaces: Labels</h2>
<p align="justify">As was explained earlier, Groundhog will only export SketchUp's <a href="http://www.sketchup.com/intl/en/developer/docs/ourdoc/face.php">faces</a>. 
Such faces may be of four different classes: illum, window, workplane and "the rest".  
In order to be light, fast and easy to use, Groundhog "Labels" the different polygons in the 
scene by using SketchUp's <a href="http://www.sketchup.com/intl/en/developer/docs/ourdoc/entity.php#set_attribute">
set_attribute</a> and <a href="http://www.sketchup.com/intl/en/developer/docs/ourdoc/entity.php#get_attribute">
get_attribute</a> API methods. This allows simply deleting, moving, creating and spliting workplanes, illums and windows without
any new method. For example, if a workplane has been define within the model, dividing it (by drawing a line within it) or copying and pasting it
will result in the existence of two workplanes. In the same way, deleting it will make the workplane desapear without the need
of going through complex internal data structures</p>

<h3>Windows</h3>
<p align="justify">Even though it is not necessary to identify windows as "special elements" when we want 
to make a render, there are some other cases where it is very convenient to export them separately. In order 
to achieve this identification, Groundhog can internally tell (from its Label) if a surface is a window or not, 
and export it in different ways.</p>

<h3>Workplanes</h3>
<p align="justify">Workplanes are planes of the space where we would like to measure the illuminance or luminance 
levels. Even though in a Groundhog-created SketchUp model the workplanes will be represented as a (semi-transparent red)
 surface, it will be exported as a sensor grid in a file that represent such sensors in a format that can be used with 
 Radiance's  <a href="http://www.radiance-online.org/learning/documentation/manual-pages/pdfs/rcontrib.pdf">rcontrib</a> 
 and <a href="http://www.radiance-online.org/learning/documentation/manual-pages/pdfs/rtrace.pdf">rtrace</a> programs.</p>
 
<h3>Illum surfaces</h3>

<p align="justify">On an e-mail conversation, Greg Ward helped me define illum surfaces as:</p>

<blockquote align="justify"><i>Illum surfaces, also known as "impostors" or "proxies," are light-emitting surfaces whose luminous 
distributions are equivalent to the distribution transmitted through them as the consequence of the existence of other 
(direct and indirect) light sources. <a href="http://www.radiance-online.org/learning/documentation/manual-pages/pdfs/mkillum.pdf">Mkillum</a> 
is the program that allows creating illum surfaces in a convenient way <a href="http://radsite.lbl.gov/radiance/book/">(Ward & Shakespeare, 1998)
</a>. For example, the daylight distribution transmitted through a window, which can be considered a consequence of the existence of the sun and sky, 
can be summarized into an illum surface.</i></blockquote>

<p align="justify">Illum surfaces may be very useful when rendering and modeling luminaires in detail. Personally, I am not
good at either of those, but I thought it was useful to include this feature in Groundhog.</p>

<p align="justify">Strictly speaking, these surfaces are not yet illum surfaces. They are exported without any Radiance modifier 
("void"), so they are invisible, and are supposed to be used for creating illums by running mkIllum program in order to create 
the actual illum.</p>
<p align="justify"><b>NOTE:</b> Every time the "Make Window" tool is used, an illum surface is created at the
interior side of the wall, represented in a semi-transparent green.</p>


<h3>Unlabeled surfaces</h3>
<p align="justify">The rest of the surfaces are the not-labeled surfaces of the scene. They will be
exported in radiance geometry files separated by layers.</p>


<h1>Exporting with Groundhog</h1>
<p align="justify">We are planning a menu that allows exporting the model in a more flexible way. For now, you will 
have to work with two stiff exporting options. You are welcome to collaborate and propose a better way.</p>

<h2>Natural Radiance export</h2>
<p align="justify">This option outputs a distribution that is (at least to me) comfortable for
rendering and implementing Daylight Coefficients simulations.</p>
<h3>How it exports windows</h3>
<p align="justify">This exportation option treats windows as if they were one of "the other" surfaces. That is, export them with 
their respective layers, and assign them their respective materials.</p>
<h3>How it exports workplanes</h3>
<p align="justify">At the moment of pressing the "export" button, you will have to input the workplane sensor spacing.
this is required because the workplanes are exported as a grid of sensors, and they are not actually a real plane any more.</p>
<p align="justify">Although workplanes are actual faces in the SketchUp model, they are not written anywhere in the geometry files.</p>
<h3>How it exports illum surfaces</h3>
<p align="justify">Illum surfaces are exported separately from "the rest" of the surfaces. By doing this, there will be two 
geometry files for each layer: One with the actual geometry, and another with the illum surfaces. The material assigned
to illum surfaces is "void", which means that they do not have any material at all.</p>
<h3>How it exports the unlabeled surfaces</h3>
<p align="justify">Unlabeled surfaces are exported separated by layers. The material assigned to them is 
the one they have been assigned in the SketchUp model. If the model is supported (i.e. it exists a Radiance Material
file in the Radiance Material Library directory), that file will be copied. If not, a "plastic" (or "glass" in case
of semi-transparent materials) approximation of the material will exported. Check <a href="file.Materials.html">how groundhog 
deals with materials</a> for more information on this.</p>

<h2>Groundhog Radiance export</h2>
<p align="justify">This option outputs a distribution that is (at least to me) comfortable for
performing 3 and 5 phase method simulations.</p>
<h3>How it exports windows</h3>
<p align="justify">This option exports windows separately from its layers. Actually it ignores the layer of the window and
creates one file for each window set. Each window set has a unique material (WindowSetMateial_$number). This is convenient 
for implementing 3 and 5 phase simulations.</p>
<h3>How it exports workplanes</h3>
<p align="justify">This option exports the workplanes in the same way the Natural Radiance Export does.</p>
<h3>How it exports illum surfaces</h3>
<p align="justify">Illum surfaces are ignored (not exported) when this option is chosen. This may be a problem when
some luminaire or other illums not corresponding to windows are defined in the model.</p>
<h3>How it exports the unlabeled surfaces</h3>
<p align="justify">Unlabeled surfaces are exported just as the Natural Radiance Export does.</p>

<h2>Export distribution</h2>

<p align="justify">When clicking the 'export' buttons on the toolbar, a directory will be created next to the SketchUp
model (it has to be saved at least once before exporting). The directory will be called 'GroundhogExport' or 'RadianceExport', 
depending on the exporting option taken. Inside it, a radiance file called 'scene.rad' is created, which references
all the layers in the 'Geometry' folder and includes a CIE clear sky sun. I have used this distribution for about
two years now, mainly because I find it useful to 'turn on and off' layers easily (i.e. when rendering an interior, 
the huge exterior terrain may be sometimes ignored).</p>
<p align="justify">The rest of the distribution is pretty simple. There will be a 'Windows' directory (if the windows
were exported separately from the geometry) a 'Workplanes' directory if there was any, the 'Illum surfaces' will be
defined in the 'Geometry' folder. The concept here is to standardize the exporting distribution, which will allow
developing scripts that make our job easier.</p>

